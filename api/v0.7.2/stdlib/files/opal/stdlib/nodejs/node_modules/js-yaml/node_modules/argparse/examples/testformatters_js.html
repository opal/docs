<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>testformatters.js</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../../../../../../../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../../../../../../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../../../../../../../css/github.css" type="text/css" media="screen" />
<script src="../../../../../../../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../../../../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../../../../../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../../../../../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            testformatters.js
        </h1>
        <ul class="files">
            <li>opal/stdlib/nodejs/node_modules/js-yaml/node_modules/argparse/examples/testformatters.js</li>
            <li>Last modified: 2015-08-29 16:13:52 +0200</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>&#39;use strict&#39;;</p>

<p>var a, group, parser, helptext;</p>

<p>var assert = require(&#39;assert&#39;); var _ =
require(&#39;underscore&#39;); _.str =
require(&#39;underscore.string&#39;); var print = function () {</p>

<pre><code>  return console.log.apply(console, arguments);
};</code></pre>

<p>// print = function () {};</p>

<p>var argparse = require(&#39;argparse&#39;);</p>

<p>print(“TEST argparse.ArgumentDefaultsHelpFormatter”);</p>

<p>parser = new argparse.ArgumentParser({</p>

<pre><code>debug: true,
formatterClass: argparse.ArgumentDefaultsHelpFormatter,
description: &#39;description&#39;</code></pre>

<p>});</p>

<p><a href="'--foo'">parser.addArgument(</a>, {</p>

<pre><code>help: &#39;foo help - oh and by the way, %(defaultValue)s&#39;</code></pre>

<p>});</p>

<p><a href="'--bar'">parser.addArgument(</a>, {</p>

<pre><code>action: &#39;storeTrue&#39;,
help: &#39;bar help&#39;</code></pre>

<p>});</p>

<p><a href="'spam'">parser.addArgument(</a>, {</p>

<pre><code>help: &#39;spam help&#39;</code></pre>

<p>});</p>

<p><a href="'badger'">parser.addArgument(</a>, {</p>

<pre><code>nargs: &#39;?&#39;,
defaultValue: &#39;wooden&#39;,
help: &#39;badger help&#39;</code></pre>

<p>});</p>

<p>group = parser.addArgumentGroup({</p>

<pre><code>title: &#39;title&#39;,
description: &#39;group description&#39;</code></pre>

<p>});</p>

<p><a href="'--baz'">group.addArgument(</a>, {</p>

<pre><code>type: &#39;int&#39;,
defaultValue: 42,
help: &#39;baz help&#39;</code></pre>

<p>});</p>

<p>helptext = parser.formatHelp(); print(helptext); // test selected clips
assert(helptext.match(/badger help (default: wooden)/));
assert(helptext.match(/foo help - oh and by the way, null/));
assert(helptext.match(/bar help (default: false)/));
assert(helptext.match(/title:n {2}group description/)); // test indent
assert(helptext.match(/baz help (default: 42)/im));</p>

<p>usage: PROG [-h] [–foo FOO] [–bar] [–baz BAZ] spam [badger]</p>

<p>description</p>

<p>positional arguments:</p>

<pre><code>spam        spam help
badger      badger help (default: wooden)</code></pre>

<p>optional arguments:</p>

<pre><code>-h, --help  show this help message and exit
--foo FOO   foo help - oh and by the way, null
--bar       bar help (default: false)</code></pre>

<p>title:</p>

<pre><code>group description

--baz BAZ   baz help (default: 42)</code></pre>

<p>print(“TEST argparse.RawDescriptionHelpFormatter”);</p>

<p>parser = new argparse.ArgumentParser({</p>

<pre><code>debug: true,
prog: &#39;PROG&#39;,
formatterClass: argparse.RawDescriptionHelpFormatter,
description: &#39;Keep the formatting\n&#39; +
             &#39;    exactly as it is written\n&#39; +
             &#39;\n&#39; +
             &#39;here\n&#39;</code></pre>

<p>});</p>

<p>a = <a href="'--foo'">parser.addArgument(</a>, {</p>

<pre><code>help: &#39;  foo help should not\n&#39; +
      &#39;    retain this odd formatting&#39;</code></pre>

<p>});</p>

<p><a href="'spam'">parser.addArgument(</a>, {</p>

<pre><code>&#39;help&#39;: &#39;spam help&#39;</code></pre>

<p>});</p>

<p>group = parser.addArgumentGroup({</p>

<pre><code>title: &#39;title&#39;,
description: &#39;    This text\n&#39; +
             &#39;  should be indented\n&#39; +
             &#39;    exactly like it is here\n&#39;</code></pre>

<p>});</p>

<p><a href="'--bar'">group.addArgument(</a>, {</p>

<pre><code>help: &#39;bar help&#39;</code></pre>

<p>});</p>

<p>helptext = parser.formatHelp(); print(helptext); // test selected clips
assert(helptext.match(parser.description));
assert.equal(helptext.match(a.help), null); assert(helptext.match(/foo help
should not retain this odd formatting/));</p>

<p>/* class TestHelpRawDescription(HelpTestCase):</p>

<pre><code>&quot;&quot;&quot;Test the RawTextHelpFormatter&quot;&quot;&quot;
</code></pre>

<p>.…</p>

<p>usage: PROG [-h] [–foo FOO] [–bar BAR] spam</p>

<p>Keep the formatting</p>

<pre><code>exactly as it is written
</code></pre>

<p>here</p>

<p>positional arguments:</p>

<pre><code>spam        spam help
</code></pre>

<p>optional arguments:</p>

<pre><code>-h, --help  show this help message and exit
--foo FOO   foo help should not retain this odd formatting</code></pre>

<p>title:</p>

<pre><code>     This text
   should be indented
     exactly like it is here

 --bar BAR   bar help
/</code></pre>

<p>print(“TEST argparse.RawTextHelpFormatter”);</p>

<p>parser = new argparse.ArgumentParser({</p>

<pre><code>debug: true,
prog: &#39;PROG&#39;,
formatterClass: argparse.RawTextHelpFormatter,
description: &#39;Keep the formatting\n&#39; +
             &#39;    exactly as it is written\n&#39; +
             &#39;\n&#39; +
             &#39;here\n&#39;</code></pre>

<p>});</p>

<p><a href="'--baz'">parser.addArgument(</a>, {</p>

<pre><code>help: &#39;    baz help should also\n&#39; +
      &#39;appear as given here&#39;</code></pre>

<p>});</p>

<p>a = <a href="'--foo'">parser.addArgument(</a>, {</p>

<pre><code>help: &#39;  foo help should also\n&#39; +
      &#39;appear as given here&#39;</code></pre>

<p>});</p>

<p><a href="'spam'">parser.addArgument(</a>, {</p>

<pre><code>&#39;help&#39;: &#39;spam help&#39;</code></pre>

<p>});</p>

<p>group = parser.addArgumentGroup({</p>

<pre><code>title: &#39;title&#39;,
description: &#39;    This text\n&#39; +
             &#39;  should be indented\n&#39; +
             &#39;    exactly like it is here\n&#39;</code></pre>

<p>});</p>

<p><a href="'--bar'">group.addArgument(</a>, {</p>

<pre><code>help: &#39;bar help&#39;</code></pre>

<p>});</p>

<p>helptext = parser.formatHelp(); print(helptext); // test selected clips
assert(helptext.match(parser.description)); assert(helptext.match(/(
{14})appear as given here/gm));</p>

<p>/* class TestHelpRawText(HelpTestCase):</p>

<pre><code>&quot;&quot;&quot;Test the RawTextHelpFormatter&quot;&quot;&quot;
</code></pre>

<p>usage: PROG [-h] [–foo FOO] [–bar BAR] spam</p>

<p>Keep the formatting</p>

<pre><code>exactly as it is written
</code></pre>

<p>here</p>

<p>positional arguments:</p>

<pre><code>spam        spam help
</code></pre>

<p>optional arguments:</p>

<pre><code>-h, --help  show this help message and exit
--foo FOO       foo help should also
            appear as given here</code></pre>

<p>title:</p>

<pre><code>     This text
   should be indented
     exactly like it is here

 --bar BAR   bar help
/</code></pre>

<p>print(“TEST metavar as a tuple”);</p>

<p>parser = new argparse.ArgumentParser({</p>

<pre><code>prog: &#39;PROG&#39;</code></pre>

<p>});</p>

<p><a href="'-w'">parser.addArgument(</a>, {</p>

<pre><code>help: &#39;w&#39;,
nargs: &#39;+&#39;,
metavar: [&#39;W1&#39;, &#39;W2&#39;]</code></pre>

<p>});</p>

<p><a href="'-x'">parser.addArgument(</a>, {</p>

<pre><code>help: &#39;x&#39;,
nargs: &#39;*&#39;,
metavar: [&#39;X1&#39;, &#39;X2&#39;]</code></pre>

<p>});</p>

<p><a href="'-y'">parser.addArgument(</a>, {</p>

<pre><code>help: &#39;y&#39;,
nargs: 3,
metavar: [&#39;Y1&#39;, &#39;Y2&#39;, &#39;Y3&#39;]</code></pre>

<p>});</p>

<p><a href="'-z'">parser.addArgument(</a>, {</p>

<pre><code>help: &#39;z&#39;,
nargs: &#39;?&#39;,
metavar: [&#39;Z1&#39;]</code></pre>

<p>});</p>

<p>helptext = parser.formatHelp(); print(helptext); var ustring = &#39;PROG
[-h] [-w W1 [W2 …]] [-x [X1 [X2 …]]] [-y Y1 Y2 Y3] [-z [Z1]]&#39;; ustring
= ustring.replace(/[/g, &#39;\[&#39;).replace(/]/g, &#39;\]&#39;); //
print(ustring) assert(helptext.match(new RegExp(ustring)));</p>

<p>/* class TestHelpTupleMetavar(HelpTestCase):</p>

<pre><code>&quot;&quot;&quot;Test specifying metavar as a tuple&quot;&quot;&quot;
</code></pre>

<p>usage: PROG [-h] [-w W1 [W2 …]] [-x [X1 [X2 …]]] [-y Y1 Y2 Y3] [-z [Z1]]</p>

<p>optional arguments:</p>

<pre><code> -h, --help        show this help message and exit
 -w W1 [W2 ...]    w
 -x [X1 [X2 ...]]  x
 -y Y1 Y2 Y3       y
 -z [Z1]           z
/</code></pre>

    </div>
  


  


  
  


  


  

  



  

    

    

    


    


    <!-- Methods -->
              </div>

    </div>
  </body>
</html>
