<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: time
  
    &mdash; corelib (Opal v0.8.1)
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "time";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: time</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame" src="file_list.html"></iframe>

      <div id="content"><div id='filecontents'><pre class="code ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>corelib/comparable</span><span class='tstring_end'>&#39;</span></span>

<span class='kw'>class</span> <span class='const'>Time</span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>Comparable</span>

  <span class='backtick'>%x{</span><span class='tstring_content'>
    var days_of_week = </span><span class='embexpr_beg'>#{</span><span class='qwords_beg'>%w[</span><span class='tstring_content'>Sunday</span><span class='words_sep'> </span><span class='tstring_content'>Monday</span><span class='words_sep'> </span><span class='tstring_content'>Tuesday</span><span class='words_sep'> </span><span class='tstring_content'>Wednesday</span><span class='words_sep'> </span><span class='tstring_content'>Thursday</span><span class='words_sep'> </span><span class='tstring_content'>Friday</span><span class='words_sep'> </span><span class='tstring_content'>Saturday</span><span class='words_sep'> </span><span class='tstring_content'>Sunday</span><span class='words_sep'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>,
        short_days   = </span><span class='embexpr_beg'>#{</span><span class='qwords_beg'>%w[</span><span class='tstring_content'>Sun</span><span class='words_sep'> </span><span class='tstring_content'>Mon</span><span class='words_sep'> </span><span class='tstring_content'>Tue</span><span class='words_sep'> </span><span class='tstring_content'>Wed</span><span class='words_sep'> </span><span class='tstring_content'>Thu</span><span class='words_sep'> </span><span class='tstring_content'>Fri</span><span class='words_sep'> </span><span class='tstring_content'>Sat</span><span class='words_sep'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>,
        short_months = </span><span class='embexpr_beg'>#{</span><span class='qwords_beg'>%w[</span><span class='tstring_content'>Jan</span><span class='words_sep'> </span><span class='tstring_content'>Feb</span><span class='words_sep'> </span><span class='tstring_content'>Mar</span><span class='words_sep'> </span><span class='tstring_content'>Apr</span><span class='words_sep'> </span><span class='tstring_content'>May</span><span class='words_sep'> </span><span class='tstring_content'>Jun</span><span class='words_sep'> </span><span class='tstring_content'>Jul</span><span class='words_sep'> </span><span class='tstring_content'>Aug</span><span class='words_sep'> </span><span class='tstring_content'>Sep</span><span class='words_sep'> </span><span class='tstring_content'>Oct</span><span class='words_sep'> </span><span class='tstring_content'>Nov</span><span class='words_sep'> </span><span class='tstring_content'>Dec</span><span class='words_sep'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>,
        long_months  = </span><span class='embexpr_beg'>#{</span><span class='qwords_beg'>%w[</span><span class='tstring_content'>January</span><span class='words_sep'> </span><span class='tstring_content'>February</span><span class='words_sep'> </span><span class='tstring_content'>March</span><span class='words_sep'> </span><span class='tstring_content'>April</span><span class='words_sep'> </span><span class='tstring_content'>May</span><span class='words_sep'> </span><span class='tstring_content'>June</span><span class='words_sep'> </span><span class='tstring_content'>July</span><span class='words_sep'> </span><span class='tstring_content'>August</span><span class='words_sep'> </span><span class='tstring_content'>September</span><span class='words_sep'> </span><span class='tstring_content'>October</span><span class='words_sep'> </span><span class='tstring_content'>November</span><span class='words_sep'> </span><span class='tstring_content'>December</span><span class='words_sep'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
  </span><span class='tstring_end'>}</span></span>

  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_at'>at</span><span class='lparen'>(</span><span class='id identifier rubyid_seconds'>seconds</span><span class='comma'>,</span> <span class='id identifier rubyid_frac'>frac</span> <span class='op'>=</span> <span class='int'>0</span><span class='rparen'>)</span>
    <span class='backtick'>`</span><span class='tstring_content'>new Date(seconds * 1000 + frac)</span><span class='tstring_end'>`</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_year'>year</span> <span class='op'>=</span> <span class='id identifier rubyid_undefined'>undefined</span><span class='comma'>,</span> <span class='id identifier rubyid_month'>month</span> <span class='op'>=</span> <span class='id identifier rubyid_undefined'>undefined</span><span class='comma'>,</span> <span class='id identifier rubyid_day'>day</span> <span class='op'>=</span> <span class='id identifier rubyid_undefined'>undefined</span><span class='comma'>,</span> <span class='id identifier rubyid_hour'>hour</span> <span class='op'>=</span> <span class='id identifier rubyid_undefined'>undefined</span><span class='comma'>,</span> <span class='id identifier rubyid_minute'>minute</span> <span class='op'>=</span> <span class='id identifier rubyid_undefined'>undefined</span><span class='comma'>,</span> <span class='id identifier rubyid_second'>second</span> <span class='op'>=</span> <span class='id identifier rubyid_undefined'>undefined</span><span class='comma'>,</span> <span class='id identifier rubyid_utc_offset'>utc_offset</span> <span class='op'>=</span> <span class='id identifier rubyid_undefined'>undefined</span><span class='rparen'>)</span>
    <span class='backtick'>%x{</span><span class='tstring_content'>
      switch (arguments.length) {
        case 1:
          return new Date(year, 0);

        case 2:
          return new Date(year, month - 1);

        case 3:
          return new Date(year, month - 1, day);

        case 4:
          return new Date(year, month - 1, day, hour);

        case 5:
          return new Date(year, month - 1, day, hour, minute);

        case 6:
          return new Date(year, month - 1, day, hour, minute, second);

        case 7:
          return new Date(year, month - 1, day, hour, minute, second);

        default:
          return new Date();
      }
    </span><span class='tstring_end'>}</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_local'>local</span><span class='lparen'>(</span><span class='id identifier rubyid_year'>year</span><span class='comma'>,</span> <span class='id identifier rubyid_month'>month</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_day'>day</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_hour'>hour</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_minute'>minute</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_second'>second</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_millisecond'>millisecond</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='backtick'>`</span><span class='tstring_content'>arguments.length === 10</span><span class='tstring_end'>`</span></span>
      <span class='backtick'>%x{</span><span class='tstring_content'>
        var args = $slice.call(arguments).reverse();

        second = args[9];
        minute = args[8];
        hour   = args[7];
        day    = args[6];
        month  = args[5];
        year   = args[4];
      </span><span class='tstring_end'>}</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_year'>year</span> <span class='op'>=</span> <span class='id identifier rubyid_year'>year</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_year'>year</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>:</span> <span class='const'>Opal</span><span class='period'>.</span><span class='id identifier rubyid_coerce_to'>coerce_to</span><span class='lparen'>(</span><span class='id identifier rubyid_year'>year</span><span class='comma'>,</span> <span class='const'>Integer</span><span class='comma'>,</span> <span class='symbol'>:to_int</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_month'>month</span> <span class='op'>=</span> <span class='id identifier rubyid_month'>month</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_month'>month</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>:</span> <span class='const'>Opal</span><span class='period'>.</span><span class='id identifier rubyid_coerce_to'>coerce_to</span><span class='lparen'>(</span><span class='id identifier rubyid_month'>month</span> <span class='op'>||</span> <span class='int'>1</span><span class='comma'>,</span> <span class='const'>Integer</span><span class='comma'>,</span> <span class='symbol'>:to_int</span><span class='rparen'>)</span>

    <span class='kw'>unless</span> <span class='id identifier rubyid_month'>month</span><span class='period'>.</span><span class='id identifier rubyid_between?'>between?</span><span class='lparen'>(</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>12</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>month out of range: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_month'>month</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_day'>day</span> <span class='op'>=</span> <span class='id identifier rubyid_day'>day</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_day'>day</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>:</span> <span class='const'>Opal</span><span class='period'>.</span><span class='id identifier rubyid_coerce_to'>coerce_to</span><span class='lparen'>(</span><span class='id identifier rubyid_day'>day</span> <span class='op'>||</span> <span class='int'>1</span><span class='comma'>,</span> <span class='const'>Integer</span><span class='comma'>,</span> <span class='symbol'>:to_int</span><span class='rparen'>)</span>

    <span class='kw'>unless</span> <span class='id identifier rubyid_day'>day</span><span class='period'>.</span><span class='id identifier rubyid_between?'>between?</span><span class='lparen'>(</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>31</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>day out of range: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_day'>day</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_hour'>hour</span> <span class='op'>=</span> <span class='id identifier rubyid_hour'>hour</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_hour'>hour</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>:</span> <span class='const'>Opal</span><span class='period'>.</span><span class='id identifier rubyid_coerce_to'>coerce_to</span><span class='lparen'>(</span><span class='id identifier rubyid_hour'>hour</span> <span class='op'>||</span> <span class='int'>0</span><span class='comma'>,</span> <span class='const'>Integer</span><span class='comma'>,</span> <span class='symbol'>:to_int</span><span class='rparen'>)</span>

    <span class='kw'>unless</span> <span class='id identifier rubyid_hour'>hour</span><span class='period'>.</span><span class='id identifier rubyid_between?'>between?</span><span class='lparen'>(</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>24</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hour out of range: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_hour'>hour</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_minute'>minute</span> <span class='op'>=</span> <span class='id identifier rubyid_minute'>minute</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_minute'>minute</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>:</span> <span class='const'>Opal</span><span class='period'>.</span><span class='id identifier rubyid_coerce_to'>coerce_to</span><span class='lparen'>(</span><span class='id identifier rubyid_minute'>minute</span> <span class='op'>||</span> <span class='int'>0</span><span class='comma'>,</span> <span class='const'>Integer</span><span class='comma'>,</span> <span class='symbol'>:to_int</span><span class='rparen'>)</span>

    <span class='kw'>unless</span> <span class='id identifier rubyid_minute'>minute</span><span class='period'>.</span><span class='id identifier rubyid_between?'>between?</span><span class='lparen'>(</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>59</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>minute out of range: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_minute'>minute</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_second'>second</span> <span class='op'>=</span> <span class='id identifier rubyid_second'>second</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>  <span class='op'>?</span> <span class='id identifier rubyid_second'>second</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>:</span> <span class='const'>Opal</span><span class='period'>.</span><span class='id identifier rubyid_coerce_to'>coerce_to</span><span class='lparen'>(</span><span class='id identifier rubyid_second'>second</span> <span class='op'>||</span> <span class='int'>0</span><span class='comma'>,</span> <span class='const'>Integer</span><span class='comma'>,</span> <span class='symbol'>:to_int</span><span class='rparen'>)</span>

    <span class='kw'>unless</span> <span class='id identifier rubyid_second'>second</span><span class='period'>.</span><span class='id identifier rubyid_between?'>between?</span><span class='lparen'>(</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>59</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>second out of range: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_second'>second</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>*</span><span class='lbracket'>[</span><span class='id identifier rubyid_year'>year</span><span class='comma'>,</span> <span class='id identifier rubyid_month'>month</span><span class='comma'>,</span> <span class='id identifier rubyid_day'>day</span><span class='comma'>,</span> <span class='id identifier rubyid_hour'>hour</span><span class='comma'>,</span> <span class='id identifier rubyid_minute'>minute</span><span class='comma'>,</span> <span class='id identifier rubyid_second'>second</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_compact'>compact</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_gm'>gm</span><span class='lparen'>(</span><span class='id identifier rubyid_year'>year</span><span class='comma'>,</span> <span class='id identifier rubyid_month'>month</span> <span class='op'>=</span> <span class='id identifier rubyid_undefined'>undefined</span><span class='comma'>,</span> <span class='id identifier rubyid_day'>day</span> <span class='op'>=</span> <span class='id identifier rubyid_undefined'>undefined</span><span class='comma'>,</span> <span class='id identifier rubyid_hour'>hour</span> <span class='op'>=</span> <span class='id identifier rubyid_undefined'>undefined</span><span class='comma'>,</span> <span class='id identifier rubyid_minute'>minute</span> <span class='op'>=</span> <span class='id identifier rubyid_undefined'>undefined</span><span class='comma'>,</span> <span class='id identifier rubyid_second'>second</span> <span class='op'>=</span> <span class='id identifier rubyid_undefined'>undefined</span><span class='comma'>,</span> <span class='id identifier rubyid_utc_offset'>utc_offset</span> <span class='op'>=</span> <span class='id identifier rubyid_undefined'>undefined</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>missing year (got nil)</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_year'>year</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

    <span class='backtick'>%x{</span><span class='tstring_content'>
      if (month &gt; 12 || day &gt; 31 || hour &gt; 24 || minute &gt; 59 || second &gt; 59) {
        </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
      }

      var date = new Date(Date.UTC(year, (month || 1) - 1, (day || 1), (hour || 0), (minute || 0), (second || 0)));
      date.tz_offset = 0
      return date;
    </span><span class='tstring_end'>}</span></span>
  <span class='kw'>end</span>

  <span class='kw'>class</span> <span class='op'>&lt;&lt;</span> <span class='kw'>self</span>
    <span class='kw'>alias</span> <span class='id identifier rubyid_mktime'>mktime</span> <span class='id identifier rubyid_local'>local</span>
    <span class='kw'>alias</span> <span class='id identifier rubyid_utc'>utc</span> <span class='id identifier rubyid_gm'>gm</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
    <span class='backtick'>`</span><span class='tstring_content'>new Date()</span><span class='tstring_end'>`</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='op'>+</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='const'>Time</span> <span class='op'>===</span> <span class='id identifier rubyid_other'>other</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>TypeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>time + time?</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_other'>other</span> <span class='op'>=</span> <span class='const'>Opal</span><span class='period'>.</span><span class='id identifier rubyid_coerce_to'>coerce_to</span> <span class='id identifier rubyid_other'>other</span><span class='comma'>,</span> <span class='const'>Integer</span><span class='comma'>,</span> <span class='symbol'>:to_int</span>

    <span class='backtick'>%x{</span><span class='tstring_content'>
      var result           = new Date(self.getTime() + (other * 1000));
          result.tz_offset = </span><span class='embvar'>#</span><span class='ivar'>@tz_offset</span><span class='tstring_content'>;

      return result;
    </span><span class='tstring_end'>}</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='op'>-</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='const'>Time</span> <span class='op'>===</span> <span class='id identifier rubyid_other'>other</span>
      <span class='kw'>return</span> <span class='backtick'>`</span><span class='tstring_content'>(self.getTime() - other.getTime()) / 1000</span><span class='tstring_end'>`</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_other'>other</span> <span class='op'>=</span> <span class='const'>Opal</span><span class='period'>.</span><span class='id identifier rubyid_coerce_to'>coerce_to</span> <span class='id identifier rubyid_other'>other</span><span class='comma'>,</span> <span class='const'>Integer</span><span class='comma'>,</span> <span class='symbol'>:to_int</span>

    <span class='backtick'>%x{</span><span class='tstring_content'>
      var result           = new Date(self.getTime() - (other * 1000));
          result.tz_offset = </span><span class='embvar'>#</span><span class='ivar'>@tz_offset</span><span class='tstring_content'>;

      return result;
    </span><span class='tstring_end'>}</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='op'>&lt;=&gt;</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='op'>==</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='rparen'>)</span>
    <span class='backtick'>`</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_to_f'>to_f</span><span class='embexpr_end'>}</span><span class='tstring_content'> === </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span><span class='embexpr_end'>}</span><span class='tstring_end'>`</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_asctime'>asctime</span>
    <span class='id identifier rubyid_strftime'>strftime</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%a %b %e %H:%M:%S %Y</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>alias</span> <span class='id identifier rubyid_ctime'>ctime</span> <span class='id identifier rubyid_asctime'>asctime</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_day'>day</span>
    <span class='backtick'>%x{</span><span class='tstring_content'>
      if (</span><span class='embvar'>#</span><span class='ivar'>@tz_offset</span><span class='tstring_content'> === 0) {
        return self.getUTCDate();
      }
      else {
        return self.getDate();
      }
    </span><span class='tstring_end'>}</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_yday'>yday</span>
    <span class='backtick'>%x{</span><span class='tstring_content'>
      // http://javascript.about.com/library/bldayyear.htm
      var onejan = new Date(self.getFullYear(), 0, 1);
      return Math.ceil((self - onejan) / 86400000);
    </span><span class='tstring_end'>}</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_isdst'>isdst</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>NotImplementedError</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_eql?'>eql?</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Time</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='kw'>self</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_other'>other</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_zero?'>zero?</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_friday?'>friday?</span>
    <span class='backtick'>`</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_wday'>wday</span><span class='embexpr_end'>}</span><span class='tstring_content'> == 5</span><span class='tstring_end'>`</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_hour'>hour</span>
    <span class='backtick'>%x{</span><span class='tstring_content'>
      if (</span><span class='embvar'>#</span><span class='ivar'>@tz_offset</span><span class='tstring_content'> === 0) {
        return self.getUTCHours();
      }
      else {
        return self.getHours();
      }
    </span><span class='tstring_end'>}</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_inspect'>inspect</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_utc?'>utc?</span>
      <span class='id identifier rubyid_strftime'>strftime</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d %H:%M:%S UTC</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_strftime'>strftime</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d %H:%M:%S %z</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>alias</span> <span class='id identifier rubyid_mday'>mday</span> <span class='id identifier rubyid_day'>day</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_min'>min</span>
    <span class='backtick'>%x{</span><span class='tstring_content'>
      if (</span><span class='embvar'>#</span><span class='ivar'>@tz_offset</span><span class='tstring_content'> === 0) {
        return self.getUTCMinutes();
      }
      else {
        return self.getMinutes();
      }
    </span><span class='tstring_end'>}</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_mon'>mon</span>
    <span class='backtick'>%x{</span><span class='tstring_content'>
      if (</span><span class='embvar'>#</span><span class='ivar'>@tz_offset</span><span class='tstring_content'> === 0) {
        return self.getUTCMonth() + 1;
      }
      else {
        return self.getMonth() + 1;
      }
    </span><span class='tstring_end'>}</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_monday?'>monday?</span>
    <span class='backtick'>`</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_wday'>wday</span><span class='embexpr_end'>}</span><span class='tstring_content'> == 1</span><span class='tstring_end'>`</span></span>
  <span class='kw'>end</span>

  <span class='kw'>alias</span> <span class='id identifier rubyid_month'>month</span> <span class='id identifier rubyid_mon'>mon</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_saturday?'>saturday?</span>
    <span class='backtick'>`</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_wday'>wday</span><span class='embexpr_end'>}</span><span class='tstring_content'> == 6</span><span class='tstring_end'>`</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_sec'>sec</span>
    <span class='backtick'>%x{</span><span class='tstring_content'>
      if (</span><span class='embvar'>#</span><span class='ivar'>@tz_offset</span><span class='tstring_content'> === 0) {
        return self.getUTCSeconds();
      }
      else {
        return self.getSeconds();
      }
    </span><span class='tstring_end'>}</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_usec'>usec</span>
    <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Microseconds are not supported</span><span class='tstring_end'>&#39;</span></span>
    <span class='int'>0</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_zone'>zone</span>
    <span class='backtick'>%x{</span><span class='tstring_content'>
      var string = self.toString(),
          result;

      if (string.indexOf(&#39;(&#39;) == -1) {
        result = string.match(/[A-Z]{3,4}/)[0];
      }
      else {
        result = string.match(/\([^)]+\)/)[0].match(/[A-Z]/g).join(&#39;&#39;);
      }

      if (result == &quot;GMT&quot; &amp;&amp; /(GMT\W*\d{4})/.test(string)) {
        return RegExp.$1;
      }
      else {
        return result;
      }
    </span><span class='tstring_end'>}</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_getgm'>getgm</span>
    <span class='backtick'>%x{</span><span class='tstring_content'>
      var result           = new Date(self.getTime());
          result.tz_offset = 0;

      return result;
    </span><span class='tstring_end'>}</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_gmt?'>gmt?</span>
    <span class='backtick'>`</span><span class='embvar'>#</span><span class='ivar'>@tz_offset</span><span class='tstring_content'> === 0</span><span class='tstring_end'>`</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_gmt_offset'>gmt_offset</span>
    <span class='backtick'>`</span><span class='tstring_content'>-self.getTimezoneOffset() * 60</span><span class='tstring_end'>`</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='id identifier rubyid_format'>format</span><span class='rparen'>)</span>
    <span class='backtick'>%x{</span><span class='tstring_content'>
      return format.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g, function(full, flags, width, _, conv) {
        var result = &quot;&quot;,
            width  = parseInt(width),
            zero   = flags.indexOf(&#39;0&#39;) !== -1,
            pad    = flags.indexOf(&#39;-&#39;) === -1,
            blank  = flags.indexOf(&#39;_&#39;) !== -1,
            upcase = flags.indexOf(&#39;^&#39;) !== -1,
            invert = flags.indexOf(&#39;#&#39;) !== -1,
            colons = (flags.match(&#39;:&#39;) || []).length;

        if (zero &amp;&amp; blank) {
          if (flags.indexOf(&#39;0&#39;) &lt; flags.indexOf(&#39;_&#39;)) {
            zero = false;
          }
          else {
            blank = false;
          }
        }

        switch (conv) {
          case &#39;Y&#39;:
            result += </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_year'>year</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            break;

          case &#39;C&#39;:
            zero    = !blank;
            result += Math.round(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_year'>year</span><span class='embexpr_end'>}</span><span class='tstring_content'> / 100);
            break;

          case &#39;y&#39;:
            zero    = !blank;
            result += (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_year'>year</span><span class='embexpr_end'>}</span><span class='tstring_content'> % 100);
            break;

          case &#39;m&#39;:
            zero    = !blank;
            result += </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mon'>mon</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            break;

          case &#39;B&#39;:
            result += long_months[</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mon'>mon</span><span class='embexpr_end'>}</span><span class='tstring_content'> - 1];
            break;

          case &#39;b&#39;:
          case &#39;h&#39;:
            blank   = !zero;
            result += short_months[</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_mon'>mon</span><span class='embexpr_end'>}</span><span class='tstring_content'> - 1];
            break;

          case &#39;d&#39;:
            zero    = !blank
            result += </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_day'>day</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            break;

          case &#39;e&#39;:
            blank   = !zero
            result += </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_day'>day</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            break;

          case &#39;j&#39;:
            result += </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_yday'>yday</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            break;

          case &#39;H&#39;:
            zero    = !blank;
            result += </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_hour'>hour</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            break;

          case &#39;k&#39;:
            blank   = !zero;
            result += </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_hour'>hour</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            break;

          case &#39;I&#39;:
            zero    = !blank;
            result += (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_hour'>hour</span><span class='embexpr_end'>}</span><span class='tstring_content'> % 12 || 12);
            break;

          case &#39;l&#39;:
            blank   = !zero;
            result += (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_hour'>hour</span><span class='embexpr_end'>}</span><span class='tstring_content'> % 12 || 12);
            break;

          case &#39;P&#39;:
            result += (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_hour'>hour</span><span class='embexpr_end'>}</span><span class='tstring_content'> &gt;= 12 ? &quot;pm&quot; : &quot;am&quot;);
            break;

          case &#39;p&#39;:
            result += (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_hour'>hour</span><span class='embexpr_end'>}</span><span class='tstring_content'> &gt;= 12 ? &quot;PM&quot; : &quot;AM&quot;);
            break;

          case &#39;M&#39;:
            zero    = !blank;
            result += </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_min'>min</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            break;

          case &#39;S&#39;:
            zero    = !blank;
            result += </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sec'>sec</span><span class='embexpr_end'>}</span><span class='tstring_content'>
            break;

          case &#39;L&#39;:
            zero    = !blank;
            width   = isNaN(width) ? 3 : width;
            result += self.getMilliseconds();
            break;

          case &#39;N&#39;:
            width   = isNaN(width) ? 9 : width;
            result += </span><span class='embexpr_beg'>#{</span><span class='backtick'>`</span><span class='tstring_content'>self.getMilliseconds().toString()</span><span class='tstring_end'>`</span></span><span class='period'>.</span><span class='id identifier rubyid_rjust'>rjust</span><span class='lparen'>(</span><span class='int'>3</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            result  = </span><span class='embexpr_beg'>#{</span><span class='backtick'>`</span><span class='tstring_content'>result</span><span class='tstring_end'>`</span></span><span class='period'>.</span><span class='id identifier rubyid_ljust'>ljust</span><span class='lparen'>(</span><span class='backtick'>`</span><span class='tstring_content'>width</span><span class='tstring_end'>`</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>0</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            break;

          case &#39;z&#39;:
            var offset  = self.getTimezoneOffset(),
                hours   = Math.floor(Math.abs(offset) / 60),
                minutes = Math.abs(offset) % 60;

            result += offset &lt; 0 ? &quot;+&quot; : &quot;-&quot;;
            result += hours &lt; 10 ? &quot;0&quot; : &quot;&quot;;
            result += hours;

            if (colons &gt; 0) {
              result += &quot;:&quot;;
            }

            result += minutes &lt; 10 ? &quot;0&quot; : &quot;&quot;;
            result += minutes;

            if (colons &gt; 1) {
              result += &quot;:00&quot;;
            }

            break;

          case &#39;Z&#39;:
            result += </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_zone'>zone</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            break;

          case &#39;A&#39;:
            result += days_of_week[</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_wday'>wday</span><span class='embexpr_end'>}</span><span class='tstring_content'>];
            break;

          case &#39;a&#39;:
            result += short_days[</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_wday'>wday</span><span class='embexpr_end'>}</span><span class='tstring_content'>];
            break;

          case &#39;u&#39;:
            result += (</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_wday'>wday</span><span class='embexpr_end'>}</span><span class='tstring_content'> + 1);
            break;

          case &#39;w&#39;:
            result += </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_wday'>wday</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            break;

          case &#39;V&#39;:
            result += </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cweek_cyear'>cweek_cyear</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_rjust'>rjust</span><span class='lparen'>(</span><span class='int'>2</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            break;

          case &#39;G&#39;:
            result += </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cweek_cyear'>cweek_cyear</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            break;

          case &#39;g&#39;:
            result += </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cweek_cyear'>cweek_cyear</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>2</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            break;

          case &#39;s&#39;:
            result += </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_to_i'>to_i</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            break;

          case &#39;n&#39;:
            result += &quot;\n&quot;;
            break;

          case &#39;t&#39;:
            result += &quot;\t&quot;;
            break;

          case &#39;%&#39;:
            result += &quot;%&quot;;
            break;

          case &#39;c&#39;:
            result += </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%a %b %e %T %Y</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            break;

          case &#39;D&#39;:
          case &#39;x&#39;:
            result += </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%m/%d/%y</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            break;

          case &#39;F&#39;:
            result += </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%Y-%m-%d</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            break;

          case &#39;v&#39;:
            result += </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%e-%^b-%4Y</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            break;

          case &#39;r&#39;:
            result += </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%I:%M:%S %p</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            break;

          case &#39;R&#39;:
            result += </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%H:%M</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            break;

          case &#39;T&#39;:
          case &#39;X&#39;:
            result += </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%H:%M:%S</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
            break;

          default:
            return full;
        }

        if (upcase) {
          result = result.toUpperCase();
        }

        if (invert) {
          result = result.replace(/[A-Z]/, function(c) { c.toLowerCase() }).
                          replace(/[a-z]/, function(c) { c.toUpperCase() });
        }

        if (pad &amp;&amp; (zero || blank)) {
          result = </span><span class='embexpr_beg'>#{</span><span class='backtick'>`</span><span class='tstring_content'>result</span><span class='tstring_end'>`</span></span><span class='period'>.</span><span class='id identifier rubyid_rjust'>rjust</span><span class='lparen'>(</span><span class='backtick'>`</span><span class='tstring_content'>isNaN(width) ? 2 : width</span><span class='tstring_end'>`</span></span><span class='comma'>,</span> <span class='backtick'>`</span><span class='tstring_content'>blank ? &quot; &quot; : &quot;0&quot;</span><span class='tstring_end'>`</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>;
        }

        return result;
      });
    </span><span class='tstring_end'>}</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_sunday?'>sunday?</span>
    <span class='backtick'>`</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_wday'>wday</span><span class='embexpr_end'>}</span><span class='tstring_content'> == 0</span><span class='tstring_end'>`</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_thursday?'>thursday?</span>
    <span class='backtick'>`</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_wday'>wday</span><span class='embexpr_end'>}</span><span class='tstring_content'> == 4</span><span class='tstring_end'>`</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_to_a'>to_a</span>
    <span class='lbracket'>[</span><span class='id identifier rubyid_sec'>sec</span><span class='comma'>,</span> <span class='id identifier rubyid_min'>min</span><span class='comma'>,</span> <span class='id identifier rubyid_hour'>hour</span><span class='comma'>,</span> <span class='id identifier rubyid_day'>day</span><span class='comma'>,</span> <span class='id identifier rubyid_month'>month</span><span class='comma'>,</span> <span class='id identifier rubyid_year'>year</span><span class='comma'>,</span> <span class='id identifier rubyid_wday'>wday</span><span class='comma'>,</span> <span class='id identifier rubyid_yday'>yday</span><span class='comma'>,</span> <span class='id identifier rubyid_isdst'>isdst</span><span class='comma'>,</span> <span class='id identifier rubyid_zone'>zone</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_to_f'>to_f</span>
    <span class='backtick'>`</span><span class='tstring_content'>self.getTime() / 1000</span><span class='tstring_end'>`</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_to_i'>to_i</span>
    <span class='backtick'>`</span><span class='tstring_content'>parseInt(self.getTime() / 1000)</span><span class='tstring_end'>`</span></span>
  <span class='kw'>end</span>

  <span class='kw'>alias</span> <span class='id identifier rubyid_to_s'>to_s</span> <span class='id identifier rubyid_inspect'>inspect</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_tuesday?'>tuesday?</span>
    <span class='backtick'>`</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_wday'>wday</span><span class='embexpr_end'>}</span><span class='tstring_content'> == 2</span><span class='tstring_end'>`</span></span>
  <span class='kw'>end</span>

  <span class='kw'>alias</span> <span class='id identifier rubyid_utc?'>utc?</span> <span class='id identifier rubyid_gmt?'>gmt?</span>

  <span class='kw'>alias</span> <span class='id identifier rubyid_utc_offset'>utc_offset</span> <span class='id identifier rubyid_gmt_offset'>gmt_offset</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_wday'>wday</span>
    <span class='backtick'>%x{</span><span class='tstring_content'>
      if (</span><span class='embvar'>#</span><span class='ivar'>@tz_offset</span><span class='tstring_content'> === 0) {
        return self.getUTCDay();
      }
      else {
        return self.getDay();
      }
    </span><span class='tstring_end'>}</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_wednesday?'>wednesday?</span>
    <span class='backtick'>`</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_wday'>wday</span><span class='embexpr_end'>}</span><span class='tstring_content'> == 3</span><span class='tstring_end'>`</span></span>
  <span class='kw'>end</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_year'>year</span>
    <span class='backtick'>%x{</span><span class='tstring_content'>
      if (</span><span class='embvar'>#</span><span class='ivar'>@tz_offset</span><span class='tstring_content'> === 0) {
        return self.getUTCFullYear();
      }
      else {
        return self.getFullYear();
      }
    </span><span class='tstring_end'>}</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_private'>private</span> <span class='symbol'>:cweek_cyear</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_cweek_cyear'>cweek_cyear</span>
    <span class='id identifier rubyid_jan01'>jan01</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_jan01_wday'>jan01_wday</span> <span class='op'>=</span> <span class='id identifier rubyid_jan01'>jan01</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span>
    <span class='id identifier rubyid_first_monday'>first_monday</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_year'>year</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_jan01_wday'>jan01_wday</span> <span class='op'>&lt;=</span> <span class='int'>4</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_jan01_wday'>jan01_wday</span> <span class='op'>!=</span> <span class='int'>0</span>
      <span class='comment'>#Jan 01 is in the first week of the year
</span>      <span class='id identifier rubyid_offset'>offset</span> <span class='op'>=</span> <span class='id identifier rubyid_jan01_wday'>jan01_wday</span><span class='op'>-</span><span class='int'>1</span>
    <span class='kw'>else</span>
      <span class='comment'>#Jan 01 is in the last week of the previous year
</span>      <span class='id identifier rubyid_offset'>offset</span> <span class='op'>=</span> <span class='id identifier rubyid_jan01_wday'>jan01_wday</span><span class='op'>-</span><span class='int'>7</span><span class='op'>-</span><span class='int'>1</span>
      <span class='id identifier rubyid_offset'>offset</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_offset'>offset</span> <span class='op'>==</span> <span class='op'>-</span><span class='int'>8</span> <span class='comment'>#Adjust if Jan 01 is a Sunday
</span>    <span class='kw'>end</span>

    <span class='id identifier rubyid_week'>week</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_yday'>yday</span><span class='op'>+</span><span class='id identifier rubyid_offset'>offset</span><span class='rparen'>)</span><span class='op'>/</span><span class='float'>7.00</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_ceil'>ceil</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_week'>week</span> <span class='op'>&lt;=</span> <span class='int'>0</span>
      <span class='comment'>#Get the last week of the previous year
</span>      <span class='kw'>return</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>12</span><span class='comma'>,</span> <span class='int'>31</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_cweek_cyear'>cweek_cyear</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_week'>week</span> <span class='op'>==</span> <span class='int'>53</span>
      <span class='comment'>#Find out whether this is actually week 53 or already week 01 of the following year
</span>      <span class='id identifier rubyid_dec31'>dec31</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_year'>year</span><span class='comma'>,</span> <span class='int'>12</span><span class='comma'>,</span> <span class='int'>31</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_dec31_wday'>dec31_wday</span> <span class='op'>=</span> <span class='id identifier rubyid_dec31'>dec31</span><span class='period'>.</span><span class='id identifier rubyid_wday'>wday</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_dec31_wday'>dec31_wday</span> <span class='op'>&lt;=</span> <span class='int'>3</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_dec31_wday'>dec31_wday</span> <span class='op'>!=</span> <span class='int'>0</span>
        <span class='id identifier rubyid_week'>week</span> <span class='op'>=</span> <span class='int'>1</span>
        <span class='id identifier rubyid_year'>year</span> <span class='op'>+=</span> <span class='int'>1</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='lbracket'>[</span><span class='id identifier rubyid_week'>week</span><span class='comma'>,</span> <span class='id identifier rubyid_year'>year</span><span class='rbracket'>]</span>

  <span class='kw'>end</span>
<span class='kw'>end</span></pre></div></div>

      <div id="footer">
  Generated on Fri Nov 27 11:10:08 2015 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.2.3).
</div>

    </div>
  </body>
</html>