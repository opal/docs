<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>int.js</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../../../../../../../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../../../../../../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../../../../../../../css/github.css" type="text/css" media="screen" />
<script src="../../../../../../../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../../../../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../../../../../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../../../../../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            int.js
        </h1>
        <ul class="files">
            <li>opal/stdlib/nodejs/node_modules/js-yaml/lib/js-yaml/type/int.js</li>
            <li>Last modified: 2015-08-19 03:18:33 +0200</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>&#39;use strict&#39;;</p>

<p>var common = require(&#39;../common&#39;); var Type   =
require(&#39;../type&#39;);</p>

<p>function isHexCode© {</p>

<pre><code>return ((0x30   0    &lt;= c) &amp;&amp; (c &lt;= 0x39   9   )) ||
       ((0x41/* A */ &lt;= c) &amp;&amp; (c &lt;= 0x46/* F */)) ||
       ((0x61/* a */ &lt;= c) &amp;&amp; (c &lt;= 0x66/* f */));</code></pre>

<p>}</p>

<p>function isOctCode© {</p>

<pre><code>return ((0x30/* 0 */ &lt;= c) &amp;&amp; (c &lt;= 0x37/* 7 */));</code></pre>

<p>}</p>

<p>function isDecCode© {</p>

<pre><code>return ((0x30/* 0 */ &lt;= c) &amp;&amp; (c &lt;= 0x39/* 9 */));</code></pre>

<p>}</p>

<p>function resolveYamlInteger(data) {</p>

<pre><code>if (null === data) {
  return false;
}

var max = data.length,
    index = 0,
    hasDigits = false,
    ch;

if (!max) { return false; }

ch = data[index];

// sign
if (ch === &#39;-&#39; || ch === &#39;+&#39;) {
  ch = data[++index];
}

if (ch === &#39;0&#39;) {
  // 0
  if (index+1 === max) { return true; }
  ch = data[++index];

  // base 2, base 8, base 16

  if (ch === &#39;b&#39;) {
    // base 2
    index++;

    for (; index &lt; max; index++) {
      ch = data[index];
      if (ch === &#39;_&#39;) { continue; }
      if (ch !== &#39;0&#39; &amp;&amp; ch !== &#39;1&#39;) {
        return false;
      }
      hasDigits = true;
    }
    return hasDigits;
  }

  if (ch === &#39;x&#39;) {
    // base 16
    index++;

    for (; index &lt; max; index++) {
      ch = data[index];
      if (ch === &#39;_&#39;) { continue; }
      if (!isHexCode(data.charCodeAt(index))) {
        return false;
      }
      hasDigits = true;
    }
    return hasDigits;
  }

  // base 8
  for (; index &lt; max; index++) {
    ch = data[index];
    if (ch === &#39;_&#39;) { continue; }
    if (!isOctCode(data.charCodeAt(index))) {
      return false;
    }
    hasDigits = true;
  }
  return hasDigits;
}

// base 10 (except 0) or base 60

for (; index &lt; max; index++) {
  ch = data[index];
  if (ch === &#39;_&#39;) { continue; }
  if (ch === &#39;:&#39;) { break; }
  if (!isDecCode(data.charCodeAt(index))) {
    return false;
  }
  hasDigits = true;
}

if (!hasDigits) { return false; }

// if !base60 - done;
if (ch !== &#39;:&#39;) { return true; }

// base60 almost not used, no needs to optimize
return /^(:[0-5]?[0-9])+$/.test(data.slice(index));</code></pre>

<p>}</p>

<p>function constructYamlInteger(data) {</p>

<pre><code>var value = data, sign = 1, ch, base, digits = [];

if (value.indexOf(&#39;_&#39;) !== -1) {
  value = value.replace(/_/g, &#39;&#39;);
}

ch = value[0];

if (ch === &#39;-&#39; || ch === &#39;+&#39;) {
  if (ch === &#39;-&#39;) { sign = -1; }
  value = value.slice(1);
  ch = value[0];
}

if (&#39;0&#39; === value) {
  return 0;
}

if (ch === &#39;0&#39;) {
  if (value[1] === &#39;b&#39;) {
    return sign * parseInt(value.slice(2), 2);
  }
  if (value[1] === &#39;x&#39;) {
    return sign * parseInt(value, 16);
  }
  return sign * parseInt(value, 8);

}

if (value.indexOf(&#39;:&#39;) !== -1) {
  value.split(&#39;:&#39;).forEach(function (v) {
    digits.unshift(parseInt(v, 10));
  });

  value = 0;
  base = 1;

  digits.forEach(function (d) {
    value += (d * base);
    base *= 60;
  });

  return sign * value;

}

return sign * parseInt(value, 10);</code></pre>

<p>}</p>

<p>function isInteger(object) {</p>

<pre><code>return (&#39;[object Number]&#39; === Object.prototype.toString.call(object)) &amp;&amp;
       (0 === object % 1 &amp;&amp; !common.isNegativeZero(object));
</code></pre>

<p>}</p>

<p>module.exports = new Type(&#39;tag:yaml.org,2002:int&#39;, {</p>

<pre><code>kind: &#39;scalar&#39;,
resolve: resolveYamlInteger,
construct: constructYamlInteger,
predicate: isInteger,
represent: {
  binary:      function (object) { return &#39;0b&#39; + object.toString(2); },
  octal:       function (object) { return &#39;0&#39;  + object.toString(8); },
  decimal:     function (object) { return        object.toString(10); },
  hexadecimal: function (object) { return &#39;0x&#39; + object.toString(16).toUpperCase(); }
},
defaultStyle: &#39;decimal&#39;,
styleAliases: {
  binary:      [ 2,  &#39;bin&#39; ],
  octal:       [ 8,  &#39;oct&#39; ],
  decimal:     [ 10, &#39;dec&#39; ],
  hexadecimal: [ 16, &#39;hex&#39; ]
}</code></pre>

<p>});</p>

    </div>
  


  


  
  


  


  

  



  

    

    

    


    


    <!-- Methods -->
              </div>

    </div>
  </body>
</html>
